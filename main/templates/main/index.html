{% extends 'main/base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'main/css/main.css' %}">
{% endblock %}
{% block content %}
    <section id="dashboard" class="block">
      <h2>Dashboard</h2>
      <p class="muted">Add your widgets, charts, or announcements here.</p>
      <div class="placeholder"></div>
    </section>

    <section id="challenges" class="block">
      <h2>Challenges</h2>
      <p class="muted">List of current challenges will appear here.</p>
      <div class="placeholder"></div>
    </section>

    <section id="tracker" class="block">
      <h2>Tracker</h2>
      <p class="muted">Tasks / time tracking / progress.</p>
      <div class="placeholder"></div>
    </section>

    <section id="rating" class="block">
      <h2>Rating</h2>
      <p class="muted">Leaderboard or user ratings.</p>
      <div class="placeholder"></div>
    </section>
{% endblock %}
{% block extra_js %}
  <script>
    // Default avatar (inline SVG as data URI), used if assets/profile.jpg missing
    window.TP_DEFAULT_AVATAR =
      'data:image/svg+xml;utf8,' +
      encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160">
        <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="#0f7ea8"/><stop offset="1" stop-color="#0b5f82"/>
        </linearGradient></defs>
        <rect width="160" height="160" rx="24" fill="url(#g)"/>
        <circle cx="80" cy="62" r="28" fill="#fff" opacity="0.9"/>
        <path d="M28 132c8-24 30-36 52-36s44 12 52 36" fill="#fff" opacity="0.9"/>
      </svg>`);

    // Burger toggle for small screens
    const burger = document.getElementById('tp-burger');
    const navCenter = document.querySelector('.nav-center');
    burger.addEventListener('click', () => {
      const open = navCenter.classList.toggle('open');
      burger.setAttribute('aria-expanded', String(open));
    });

    // Smooth scroll + active state
    document.querySelectorAll('.nav-center a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if(el){ window.scrollTo({top: el.offsetTop - 72, behavior:'smooth'}); }
        navCenter.classList.remove('open');
        burger.setAttribute('aria-expanded','false');
        document.querySelectorAll('.nav-center .nav-link').forEach(l=>l.classList.remove('active'));
        a.classList.add('active');
      });
    });
  </script>
{% endblock %}
