{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="csrf-token" content="{{ csrf_token }}">

<title>{% block title %}TechnoPulse â€” Main{% endblock %}</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'main/css/base.css' %}">
    {% block extra_css %} {% endblock %}
</head>
<body>
  <!-- ===== NAVBAR (fixed) ===== -->
  <header class="tp-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-inner">
      <!-- Left: avatar (fallback to default if image not found) -->
    {% if user.is_authenticated %}
      <a class="nav-left" href="{% url 'profile' %}" aria-label="Profile">
        <img id="tp-avatar" class="avatar" alt="Profile"
             src="{% static 'main/img/avatar-default.svg' %}"
{#             http://www.w3.org/2000/svg#}
             onerror="this.onerror=null; this.src=window.TP_DEFAULT_AVATAR;" />
      </a>
    {% endif %}
      <!-- Center: links -->
      <nav class="nav-center" aria-label="Primary">
        <a class="nav-link {% if request.resolver_match.url_name == 'main' %}active{% endif %}" href="{% url 'main' %}">Dashboard</a>
        <a class="nav-link {% if request.resolver_match.url_name == 'challenges' %}active{% endif %}" href="#challenges">Challenges</a>
        <a class="nav-link {% if request.resolver_match.url_name == 'tracker' %}active{% endif %}" href="{% url 'tracker' %}">Tracker</a>
        <a class="nav-link {% if request.resolver_match.url_name == 'rating' %}active{% endif %}" href="#rating">Rating</a>
      </nav>
    {% if not user.is_authenticated %}
      <div class="nav-actions">
        <a class="btn btn-outline" href={% url 'login' %}>Sign in</a>
        <a class="btn btn-primary" href={% url 'register' %}>Create account</a>
      </div>
    {% endif %}
      <!-- Mobile burger (toggles center links) -->
      <button class="nav-burger" id="tp-burger" aria-label="Menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>
    <main class="tp-main">
        {% block content %} {% endblock %}
    </main>
    {% block extra_js %}{% endblock %}
</body>
</html>
