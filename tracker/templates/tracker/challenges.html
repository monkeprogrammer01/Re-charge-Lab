{% extends 'main/base.html' %}
{% load static %}
    {% block extra_css %}
    <link rel="stylesheet" href="{% static 'tracker/css/challenges.css' %}">
    {% endblock %}
{% block extra_js %}
    <script src="{% static 'tracker/js/challenges.js' %}" defer></script>
    <script src="{% static 'tracker/js/auth.js' %}"></script>
{% endblock %}
{% block content %}
<main class="ch-layout">
    <section class="ch-sidebar">
        <div class="ch-card ch-summary">
            <h2 class="ch-title">Your challenge stats</h2>
            <div class="ch-summary-row">
                <span>Total</span>
                <span id="stat-total">0</span>
            </div>
            <div class="ch-summary-row">
                <span>In progress</span>
                <span id="stat-progress">0</span>
            </div>
            <div class="ch-summary-row">
                <span>Completed</span>
                <span id="stat-completed">0</span>
            </div>

            <div class="ch-divider"></div>

            <p class="ch-subtitle">Filter by difficulty</p>
            <div class="ch-filter-group">
                <button class="ch-filter-btn ch-filter-btn-active" data-filter="all">All</button>
                <button class="ch-filter-btn" data-filter="easy">Easy</button>
                <button class="ch-filter-btn" data-filter="medium">Medium</button>
                <button class="ch-filter-btn" data-filter="hard">Hard</button>
            </div>

            <p class="ch-subtitle">Search</p>
            <div class="ch-search-box">
                <input type="text" id="challenge-search" placeholder="Search challenge...">
            </div>
        </div>

        <div class="ch-card ch-tip">
            <h3 class="ch-tip-title">Today’s tip</h3>
            <p class="ch-tip-text">
                Pick one small challenge, finish it fully, and only then switch to the next.
            </p>
        </div>
    </section>

    <section class="ch-main">
        <div class="ch-main-header">
            <div>
                <h1 class="ch-main-title">Challenges</h1>
                <p class="ch-main-subtitle">
                    Plan your coding, study and activity challenges in one clean space.
                </p>
            </div>
            <!-- здесь больше НЕТ Add new challenge -->
        </div>

        <div class="ch-list-header">
            <span>Name</span>
            <span>Difficulty</span>
            <span>Status</span>
            <span>Progress</span>
            <span></span>
        </div>

        <div class="ch-list" id="challenge-list">
            <article class="challenge-card" data-difficulty="easy" data-status="not-started">
                <div class="ch-cell ch-cell-name">
                    <h3 class="challenge-title">Array basics</h3>
                    <p class="challenge-desc">Solve simple problems with loops and arrays.</p>
                    <div class="ch-tags">
                        <span class="ch-tag">Java</span>
                        <span class="ch-tag">Beginner</span>
                    </div>
                </div>
                <div class="ch-cell ch-cell-diff">
                    <span class="ch-badge ch-badge-easy">Easy</span>
                    <div class="ch-points">10 pts</div>
                </div>
                <div class="ch-cell ch-cell-status">
                    <span class="ch-status-badge ch-status-not-started">Not started</span>
                </div>
                <div class="ch-cell ch-cell-progress">
                    <div class="ch-progress">
                        <div class="ch-progress-bar" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="ch-cell ch-cell-action">
                    <button class="ch-secondary-btn status-toggle">Start</button>
                </div>
            </article>

            <article class="challenge-card" data-difficulty="medium" data-status="in-progress">
                <div class="ch-cell ch-cell-name">
                    <h3 class="challenge-title">Sorting playground</h3>
                    <p class="challenge-desc">Implement bubble, selection and insertion sort.</p>
                    <div class="ch-tags">
                        <span class="ch-tag">Algorithms</span>
                        <span class="ch-tag">Java</span>
                    </div>
                </div>
                <div class="ch-cell ch-cell-diff">
                    <span class="ch-badge ch-badge-medium">Medium</span>
                    <div class="ch-points">20 pts</div>
                </div>
                <div class="ch-cell ch-cell-status">
                    <span class="ch-status-badge ch-status-in-progress">In progress</span>
                </div>
                <div class="ch-cell ch-cell-progress">
                    <div class="ch-progress">
                        <div class="ch-progress-bar" style="width: 45%;"></div>
                    </div>
                </div>
                <div class="ch-cell ch-cell-action">
                    <button class="ch-secondary-btn status-toggle">Continue</button>
                </div>
            </article>

            <article class="challenge-card" data-difficulty="hard" data-status="completed">
                <div class="ch-cell ch-cell-name">
                    <h3 class="challenge-title">Recursion marathon</h3>
                    <p class="challenge-desc">Solve problems using recursive thinking instead of loops.</p>
                    <div class="ch-tags">
                        <span class="ch-tag">Recursion</span>
                        <span class="ch-tag">CS fundamentals</span>
                    </div>
                </div>
                <div class="ch-cell ch-cell-diff">
                    <span class="ch-badge ch-badge-hard">Hard</span>
                    <div class="ch-points">30 pts</div>
                </div>
                <div class="ch-cell ch-cell-status">
                    <span class="ch-status-badge ch-status-completed">Completed</span>
                </div>
                <div class="ch-cell ch-cell-progress">
                    <div class="ch-progress">
                        <div class="ch-progress-bar ch-progress-completed" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="ch-cell ch-cell-action">
                    <button class="ch-secondary-btn status-toggle">Again</button>
                </div>
            </article>
        </div>
    </section>
</main>

<div id="authModal" class="auth-modal">
  <div class="auth-modal-card">
    <h3 class="auth-modal-title">Sign in required</h3>
    <p class="auth-modal-text">
      The Rating page and AI assistant are available only for signed-in users.
      Please sign in or create a new account.
    </p>
    <div class="auth-modal-actions">
      <button type="button" class="btn-ghost" id="authCancelBtn">Maybe later</button>
      <a href="sign_in.html" class="btn-primary auth-link-btn">Sign in</a>
      <a href="create_account.html" class="btn-primary auth-link-btn">Create account</a>
    </div>
  </div>
</div>
{% endblock %}


