{% extends 'main/base.html' %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'tracker/css/tracker.css' %}">
{% endblock %}
{% block content %}

    <main class="main-tp">
        <div class="container">

            <div class="header">
                <div class="date" id="current-date">Monday, December 15</div>
                <div class="balance-score" id="balance-score">{{ total_points }}%</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="main-progress" style="width: {{ total_points }}%"></div>
                </div>
                <div class="balance-status" id="balance-status">üü° Average balance level</div>
            </div>

            <div class="section physical">
                <div class="section-header">
                    <span class="icon"><i class="fas fa-walking"></i></span> PHYSICAL HEALTH
                </div>
                <div class="section-progress">
                    <div class="section-progress-fill" style="width: {{ total_points }}%"></div>
                </div>

                <div class="tracker-grid">
                    <div class="tracker-item">
                        <div class="tracker-title">
                            <span class="emoji">üçΩÔ∏è</span>
                            NUTRITION
                        </div>
                        <div class="meals-container">
                            <div class="meal {% if meals.breakfast %}eaten{% endif %}" data-meal="breakfast">
                                <div>üç≥</div>
                                <div class="meal-time">Breakfast</div>
                            </div>
                            <div class="meal {% if meals.lunch %}eaten{% endif %}" data-meal="lunch">
                                <div>üç≤</div>
                                <div class="meal-time">Lunch</div>
                            </div>
                            <div class="meal {% if meals.dinner %}eaten{% endif %}" data-meal="dinner">
                                <div>üçù</div>
                                <div class="meal-time">Dinner</div>
                            </div>
                        </div>
                    </div>

                    <!-- Water -->
                    <div class="tracker-item">
                        <div class="tracker-title" id="tracker-water">
                            <span class="emoji">üíß</span>
                            WATER ({{ water }}/10)
                        </div>
                        <div class="water-container">
                            {% for i in water_range %}
                                <div class="glass {% if i <= water %}filled{% endif %}">üíß</div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Movement -->
                    <div class="tracker-item">
                        <div class="tracker-title">
                            <span class="emoji">üö∂</span>
                            MOVEMENT
                        </div>
                        <div class="movement-controls">
                            <button class="time-btn" onclick="updateMovement(-5)">-5</button>
                            <div class="time-display" id="movement-time">{{ movement_minutes }} min</div>
                            <button class="time-btn" onclick="updateMovement(5)">+5</button>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="went-outside">
                            <label for="went-outside">üö∂ Went outside</label>
                        </div>
                    </div>

                    <!-- Stimulants -->
                    {#                    <div class="tracker-item">#}
                    {#                        <div class="tracker-title">#}
                    {#                            <span class="emoji">‚ö°</span>#}
                    {#                            STIMULANTS#}
                    {#                        </div>#}
                    {#                        <div class="stimulants-grid">#}
                    {#                            <div class="stimulant-item">#}
                    {#                                <div>‚òï Coffee</div>#}
                    {#                                <div class="stimulant-buttons">#}
                    {#                                    <button class="stimulant-btn active">1</button>#}
                    {#                                    <button class="stimulant-btn">2</button>#}
                    {#                                    <button class="stimulant-btn">3</button>#}
                    {#                                </div>#}
                    {#                            </div>#}
                    {#                            <div class="stimulant-item">#}
                    {#                                <div>üç© Sweets</div>#}
                    {#                                <div class="stimulant-buttons">#}
                    {#                                    <button class="stimulant-btn">1</button>#}
                    {#                                    <button class="stimulant-btn">2</button>#}
                    {#                                    <button class="stimulant-btn">3</button>#}
                    {#                                    <button class="stimulant-btn">4</button>#}
                    {#                                    <button class="stimulant-btn">5</button>#}
                    {#                                </div>#}
                    {#                            </div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                </div>
            </div>

            <div class="section emotional">
                <div class="section-header">
                    <span class="icon"><i class="fa-solid fa-heart"></i></span>
                    EMOTIONAL STATE
                </div>
                <div class="section-progress">
                    <div class="section-progress-fill" style="width: 50%"></div>
                </div>

                <div class="tracker-grid">
                    <div class="tracker-item">
                        <div class="tracker-title">
                            <span class="emoji">üòä</span>
                            MOOD
                        </div>
                        <div class="mood-container">
                            <div class="mood-option selected" data-mood="3">
                                <div>üòä</div>
                                <div>Good</div>
                            </div>
                            <div class="mood-option" data-mood="2">
                                <div>üòê</div>
                                <div>Normal</div>
                            </div>
                            <div class="mood-option" data-mood="1">
                                <div>üò¢</div>
                                <div>Bad</div>
                            </div>
                        </div>
                    </div>

                    <div class="tracker-item">
                        <div class="tracker-title">
                            <span class="emoji">üßò</span>
                            RELAXATION ({{ relaxation_minutes }}/10 min)
                        </div>
                        <div class="relaxation-controls">
                            <button class="time-btn" onclick="updateRelaxation(-5)">-5</button>
                            <div class="time-display" id="relaxation-time">{{ relaxation_minutes }} min</div>
                            <button class="time-btn" onclick="updateRelaxation(5)">+5</button>
                        </div>
                    </div>

                    <div class="tracker-item">
                        <div class="tracker-title">
                            <span class="emoji">üéØ</span>
                            DAILY CHALLENGE
                        </div>
                        <div class="challenge-card">
                            <div class="challenge-text">"Take 5 deep breaths"</div>
                            <button class="challenge-btn" id="challengeButton"
    {% if completed_challenge %}disabled{% endif %} onclick="completeChallenge()">
    {% if completed_challenge %}Completed{% else %}Complete Challenge{% endif %}
</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section social">
                <div class="section-header">
                    <span class="icon"><i class="fas fa-user-friends"></i></span> SOCIAL CONNECTIONS
                </div>
                <div class="section-progress">
                    <div class="section-progress-fill" style="width: 20%"></div>
                </div>

                <div class="tracker-grid">
                    <div class="social-checkboxes">
                        <div class="social-checkbox">
                            <input type="checkbox" id="social-chat" {% if 'social-chat' in social_connections %}checked{% endif %}>
                            <label for="social-chat">üí¨ Texted a friend</label>
                        </div>
                        <div class="social-checkbox">
                            <input type="checkbox" id="social-call" {% if 'social-call' in social_connections %}checked{% endif %}>
                            <label for="social-call">üìû Called family</label>
                        </div>
                        <div class="social-checkbox">
                            <input type="checkbox" id="social-colleague" {% if 'social-colleague' in social_connections %}checked{% endif %}>
                            <label for="social-colleague">üë• Talked with colleague</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <span class="icon"><i class="fa-solid fa-chart-area"></i></span>
                    DAILY PROGRESS
                </div>

                <div class="achievements">
                    <div class="achievement">
                        <span>üíß</span>
                        <span>Drank {{ water }} glasses of water</span>
                    </div>
                    <div class="achievement">
                        <span>üç≥</span>
                        <span>Had breakfast and lunch</span>
                    </div>
                    <div class="achievement">
                        <span>üö∂</span>
                        <span>{{ movement_minutes }} minutes of activity</span>
                    </div>
                </div>

                <div class="notifications">
                    <div>üîî TELEGRAM: ‚úÖ Connected</div>
                    <div style="font-size: 12px; margin-top: 5px; opacity: 0.7;">Receiving smart reminders</div>
                </div>
            </div>
        </div>
    </main>

{% endblock %}
{% block extra_js %}
    <script src="{% static 'tracker/js/tracker.js' %}"></script>
{% endblock %}